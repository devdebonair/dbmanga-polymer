<dom-module id="debonair-book">
	<style>
		#wrapper {
			height: 442px;
			background-color: #141414;
			color: #e0e0e0;
		}

		#wrapper {
			transition: 0.4s;
		}
		.deactivate {
			width: 320px;
		}

		.activate {
			width: 100%;
		}

		.no-display {
			display: none;
		}

		.info-button {
			color: white;
			position: absolute;
			bottom: 0;
			right: 0;
			z-index: 99;
			background-color: transparent;
			cursor: pointer;
			padding: 0 5px 5px 0;
		}

		/******************************************************************
		*
		*	Book Content
		*
		*******************************************************************/
		#book_description_wrapper {
			height: 100%; 
		}

		#book_description_content {
			background-color: inherit;
			width: auto;
			padding: 5px 55px;
			overflow-x: hidden;
			overflow-y: scroll;
			height: 83%;
		}

		::content .book_title {
			font-size: 24px;
			letter-spacing: 5px;
			font-weight: 400;
			padding-bottom: 5px;
			margin-bottom: 0%;
			text-align: center;
			color: #eceff1;
		}

		::content .book_summary p {
			line-height: 30px;
			word-spacing: 2px;
		}
	</style>
	<template>

		<section id="wrapper" class="horizontal layout flex" on-mouseover="activate" on-mouseout="deactivate">

<!--================================= Book Images ================================-->
			<section id="book_images">
				<template is="dom-repeat" items="{{images}}">
					<div class="book_image">
						<img height="442" width="320" src="{{item}}" on-click="_imageClickHandler">
					</div>
				</template>
			</section>

<!--================================= Book Description ============================-->
			<section id="book_description_wrapper" class="vertical layout flex">
				<div id="book_description_content">
					<content></content>
				</div>
			</section>

		</section>
	</template>
</dom-module>

<script type="text/javascript">
	Polymer({
		is: "debonair-book",
		properties: {
			cover: 		String,
			images: 	Array,
			activated: 	{
				type: Boolean,
				observer: 'activatedChanged',
				value: false
			}
		},
		ready: function()
		{
			this.images = [
				"http://fangirlisms.com/wp-content/uploads/2013/11/attack-on-titan-poster.jpg",
				"http://2.bp.blogspot.com/-qstAA84knZ4/TpEpJgxgZ5I/AAAAAAAAAs0/uIf-pvdq5Wk/000.jpg?imgmax=10000",
				"http://2.bp.blogspot.com/-EoqBKmNonbk/TpEpML00CGI/AAAAAAAAAtA/pXYmaeUhpnY/001.jpg?imgmax=10000",
				"http://2.bp.blogspot.com/-_E0yUVbgkkM/TpEpPzBgixI/AAAAAAAAAtM/R1dxInZ0XIc/002.jpg?imgmax=10000"
			];
			this.cover = "http://fangirlisms.com/wp-content/uploads/2013/11/attack-on-titan-poster.jpg";
			this.async(function(){
				this.showCover();
				this.$.book_description_content.classList.add('no-display');
			}, 2);
		},
		displayImage: function(index)
		{
			if(index < 0 || typeof index !== 'number')
			{
				index = 0;
			}
			var el = document.getElementsByClassName('book_image');
			index = index >= el.length ? 0 : index;
			for(var i = 0; i < el.length; i++)
			{
				if(i === index)
				{
					el[i].classList.remove('no-display');
				}
				else
				{
					el[i].classList.add('no-display');
				}
			}
		},
		showCover: function()
		{
			this.displayImage(this.images.indexOf(this.cover));
		},
		_imageClickHandler: function(e)
		{
			this.activated = true;
			var index = this.images.indexOf(e.target.src) + 1;
			console.log(index);
			this.displayImage(index);
		},
		activate: function()
		{
			this.activated = true;
		},
		deactivate: function()
		{
			this.activated = false;
		},
		activatedChanged: function(newValue)
		{
			if(newValue)
			{
				this.$.wrapper.classList.remove('deactivate');
				this.$.wrapper.classList.add('activate');
				this.$.book_description_content.classList.remove('no-display');
				return;
			}
			this.$.wrapper.classList.remove('activate');
			this.$.wrapper.classList.add('deactivate');
			this.$.book_description_content.classList.add('no-display');
			return;
		}
	});
</script>