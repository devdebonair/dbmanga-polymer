<dom-module id="debonair-book">
	<style>
		#wrapper {
			height: 442px;
			width: 320px;
			border-radius: 10px;
			margin: 5%;					/*Temporary padding to see element*/
			border: solid thin #DBE1D2;
			box-shadow: 2px 2px 5px #A7ADA1;
		}

		#book_description_wrapper {
			height: 100%; 
		}

		#book_description_content {
			background-color: inherit;
			width: auto;
			padding: 5px 55px;
			overflow-x: hidden;
			overflow-y: scroll;
			height: 83%;
		}

		::content .book_title {
			font-size: 24px;
			letter-spacing: 5px;
			font-weight: 400;
			padding-bottom: 5px;
			margin-bottom: 0%;
			text-align: center;
			color: #1C1E2E;
		}

		::content .book_summary p {
			line-height: 30px;
		}

		/* entire container, keeps perspective */
		.flip-container {
			perspective: 1000;
		}

		/* flip the pane when hovered */
		.flipper, .flip-container.hover .flipper {
			transform: rotateY(180deg);
		}

		.flip-container, .front, .back {
			width: 320px;
			height: 480px;
		}

		/* flip speed goes here */
		.flipper {
			transition: 0.6s;
			transform-style: preserve-3d;

			position: relative;
		}

		/* hide back of pane during swap */
		.front, .back, .book_image {
			backface-visibility: hidden;

			position: absolute;
			top: 0;
			left: 0;
		}

		/* front pane, placed above back */
		.front {
			z-index: 2;
			/* for firefox 31 */
			transform: rotateY(0deg);
		}

		/* back, initially hidden pane */
		.back, .book_image {
			transform: rotateY(180deg);
		}

		.no-display {
			display: none;
		}

		.info-button {
			color: white;
			position: absolute;
			bottom: 0;
			right: 0;
			z-index: 99;
			background-color: transparent;
			cursor: pointer;
			padding: 0 5px 5px 0;
		}

		.book_image > img {
			border-radius: 10px;
		}
	</style>
	<template>

		<section id="wrapper" class="horizontal layout flex">

<!--================================= Book Images ================================-->
			<section id="book_images">
				<div class="flip-container">
					<div class="flipper">
						<template is="dom-repeat" items="{{images}}">
							<div class="book_image">
								<img height="442" width="320" src="{{item}}" on-click="_imageClickHandler">
				<span class="info-button">READ</span>
							</div>
						</template>
					</div>
				</div>
			</section>

<!--================================= Book Description ============================-->
			<section id="book_description_wrapper" class="vertical layout flex">
				<div id="book_description_content">
					<content></content>
				</div>
			</section>

		</section>
	</template>
</dom-module>

<script type="text/javascript">
	Polymer({
		is: "debonair-book",
		properties: {
			cover: String,
			images: Array
		},
		ready: function()
		{
			this.images = [
				"http://fangirlisms.com/wp-content/uploads/2013/11/attack-on-titan-poster.jpg",
				"http://2.bp.blogspot.com/-qstAA84knZ4/TpEpJgxgZ5I/AAAAAAAAAs0/uIf-pvdq5Wk/000.jpg?imgmax=10000",
				"http://2.bp.blogspot.com/-EoqBKmNonbk/TpEpML00CGI/AAAAAAAAAtA/pXYmaeUhpnY/001.jpg?imgmax=10000",
				"http://2.bp.blogspot.com/-_E0yUVbgkkM/TpEpPzBgixI/AAAAAAAAAtM/R1dxInZ0XIc/002.jpg?imgmax=10000"
			];
			this.cover = "http://fangirlisms.com/wp-content/uploads/2013/11/attack-on-titan-poster.jpg";
		},
		attached: function()
		{
			this.async(function(){
				this.showCover();
				this.$.book_description_content.classList.add('no-display');
			}, 1);
		},
		_imageClickHandler(e)
		{
			this.displayImage(this.images.indexOf(e.target.src)+1);
		},
		displayImage: function(index)
		{
			if(index < 0 || typeof index !== 'number')
			{
				index = 0;
			}
			var el = document.getElementsByClassName('book_image');
			index = index >= el.length ? 0 : index;
			for(var i = 0; i < el.length; i++)
			{
				if(i === index)
				{
					el[i].classList.remove('no-display');
				}
				else
				{
					el[i].classList.add('no-display');
				}
			}
		},
		showCover: function()
		{
			this.displayImage(this.images.indexOf(this.cover));
		}
	});
</script>